<!DOCTYPE html>

<html lang="fr">

        <head>
                <!-- Page information -->
                <meta charset="UTF-8" />
                <meta name="node_id" content="réparer les éclairages d'un vélo de recyclerie avec l'impression 3d">
                <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                <link rel="shortcut icon" href="minihub/favicon.ico" />

                <!-- Set title -->
                <title>Guillivigne Documentation</title>

                <!-- Includes -->
                
<script src="minihub/obs.html/static/obsidian_core.js"></script>
<script src="minihub/obs.html/static/encoding.js"></script>
<link rel="stylesheet" href="minihub/obs.html/static/master.css" />
<script src="minihub/obs.html/static/mermaid.9.0.1.min.js"></script>
<script>
  MathJax = {
    loader: {
      load: [
        '[tex]/action',
        'output/chtml',
        '[tex]/centernot'
      ]
    },
    tex: {
      inlineMath: [ ["\\(","\\)"] ],
      displayMath: [ ["\\[","\\]"] ],
      processEscapes: true,
      processEnvironments: true,
      packages: {'[+]': ['centernot']}
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
<script src="minihub/obs.html/static/flexsearch.bundle.js"></script>
<script src="minihub/obs.html/static/pako.js"></script>
<script src="minihub/obs.html/static/search.js"></script>
<script src="minihub/obs.html/static/dirtree.js"></script>


                <!-- Onload tweaks -->
                <script>
                        const CURRENT_NODE = 'réparer les éclairages d'un vélo de recyclerie avec l'impression 3d';
                        const HTML_URL_PREFIX = 'minihub';
                        const PAGE_DEPTH = 2;
                </script>
        </head>

<body class="theme-obs-dark">
        <div id="antiflash" style="display: none;"></div>
        <script>
                document.getElementById('antiflash').style.display = 'block';
        </script>
        <div id="search-master-div">
    <div id="search-slab" king_ramses="return the slaaab">
            <div id="search-controls">
                    <input id="search_string" placeholder="Tapez pour rechercher des notes" type="text" />
                    <div class="tooltip" style="display: none;">
                        <input type="checkbox" id="hard_search" name="hard" />
                        <span class="tooltiptext">Recherche avancée (exige une correspondance exacte)</span>
                    </div>
                    <div id="search-results-box">
                        <div id="search-results"></div>
                    </div>
                    <div id="search-instructions">
                        <div class="prompt-instruction">
                            <b>Échap</b> pour fermer
                        </div>
                    </div>
            </div>
    </div>
</div>

<script>
    document.getElementById("search-master-div").addEventListener('click', e => {
            if(e.target !== e.currentTarget){
                    return
            }
            toggle_id('search-master-div');
    })
    document.getElementById("search_string").addEventListener("input", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    }); 
    document.getElementById("hard_search").addEventListener("click", function(event) {
            setTimeout( () =>run_search('search_string', 'hard_search'), 100 );
    });

    window.addEventListener('keydown', e => {
        if((e.key=='Escape'||e.key=='Esc'||e.keyCode==27)){
            toggle_id('search-master-div');
            return false;
        } 
    }, true);

    function click_list_link(element){
        element.parentElement.getElementsByTagName('a')[0].click()
    }
</script>

        <div id="page_holder" class="flex_col">
                <div id="header" class="header">
    <div id="header_flex" class="flex_row">
			<div id="custom_homelink">
					<div id="custom_title"><a href="minihub/index.html" title="Aller à la page d'accueil">Guillivigne</a></div>
					<div id="custom_subtitle"><a href="minihub/index.html" title="Aller à la page d'accueil">Documentation</a></div>
			</div>
            <!-- <a href="minihub/index.html" id="homelink" title="Aller à la page d'accueil">Guillivigne</a> -->
            <div id="menu_toggle_button" class="navbar-button requires_js" onclick="toggle_menu()">
                    ≡
            </div>
            <div id="navbar" class="navbar requires_js">
                    <a class="navbar-link" href="minihub/index.html" title="Accueil">Accueil</a>
<a class="navbar-link" href="https://obsidian.md/" title="Obsidian">Obsidian</a>
<a class="navbar-link" href="https://obsidian-html.github.io/" title="ObsidianHTML">ObsidianHTML</a>
<a class="navbar-link" href="https://github.com/Skurdh/obsidian-html" title="Github Fork">Github Fork</a>
                    <div class="icon-tray">
                            <div id="custom_theme" class="theme-button dark requires_js" onclick="toggle_theme(this)" title="Changer de thème"></div>
<script>
    function toggle_theme(el){
        if (el.classList.contains("dark")) {
            el.classList.remove("dark")
            el.classList.add("light");
            set_theme("obs-light");
        } else {
            el.classList.remove("light")
            el.classList.add("dark");
            set_theme("obs-dark");
        }
    }
</script>
                                    <div onclick="openSearch()" class="requires_js">
                <img src = "minihub/obs.html/static/icon_search.png" alt="Rechercher des notes" title="Rechercher des notes"/>
        </div>
        <script>
                function openSearch(){
                        // toggle search popup and continue with extra code if it is enabled this time
                        if (toggle_id('search-master-div')){
                                // clear input and put focus on it so that we can start typing immediately
                                let ss = document.getElementById('search_string');
                                ss.value = '';
                                ss.focus()
                                ss.select()
                        }
                }
        </script>
                                    <div class="graph_header_div requires_js">
            <a id="graph_link" class="system-link" href="minihub/obs.html/graph/index.html?node=réparer les éclairages d'un vélo de recyclerie avec l'impression 3d" title="Ouvrir le Graph en pleine page">
                    <img class="graph_header_div_svg" src = "minihub/obs.html/static/icon_graph.png" alt="Ouvrir le Graph en pleine page"/>
            </a>
        </div>
                                    <div >
            <a id="dirtree_link" class="system-link" href="minihub/obs.html/dir_index.html" title="Afficher l'arborescence du répertoire">
                    <img src = "minihub/obs.html/static/icon_dirtree.png" alt="Lien vers l'arborescence du répertoire"/>
            </a>
        </div>
                            <div>
    <a href="minihub/obs.html/tags/index.html" title="Ouvrir la liste des tags">
            <img src = "minihub/obs.html/static/icon_hashtag.png" alt="Lien vers le flux RSS"/>
    </a>
</div>
                            
                    </div>
                    <div style="display: flex; flex-direction:column">
                        <div id="left_pane_toggle_nav" class="left_pane_toggle_nav">Toggle Directory Tree Pane</div>
                        <div id="right_pane_toggle_nav" class="right_pane_toggle_nav">Toggle Table of Contents Pane</div>
                    </div>
            </div>
    </div>
    <div class="popup" id="theme-popup">
    <label for="cars">Mode </label>

    <select name="theme" id="theme" onchange="set_theme(this.value)">
      <!-- <option value="light">light</option> -->
      <option value="obs-dark" selected="selected">Sombre</option>
      <option value="obs-light">Clair</option>
    </select> 
</div>
</div>
                <div id="custom-separator"></div>
                <div class="flex_row">
                        <div id="left_pane" class="left_pane active">
    <div id="left_pane_fold_header" class="left_pane_fold_header fold_header">x</div>
    <div id="left_pane_content" class="left_pane_content">
            <div class="dirtree"><button id="folder-1" class="dir-button" onclick="toggle_dir(this.id)">Articles Guillivigne</button>
<div id="folder-container-1" class="dir-container requires_js active" path="minihub/Articles Guillivigne">
	<button id="folder-2" class="dir-button" onclick="toggle_dir(this.id)">Impression 3D</button>
	<div id="folder-container-2" class="dir-container requires_js active" path="minihub/Articles Guillivigne/Impression 3D">
		<ul class="dir-list">
			<li><a class="" href="minihub/Articles Guillivigne/Impression 3D/Réparer les éclairages d'un vélo de recyclerie avec l'impression 3D.html"  >Réparer les éclairages d'un vélo de recyclerie avec l'impression 3D</a></li>
		</ul>
	</div>
	<ul class="dir-list">
	</ul>
</div>
<ul class="dir-list">
	<li><a class="" href="minihub/index.html"  >Accueil</a></li>
</ul>
</div>
    </div>
</div>
                        <div class="container">
                                
                <div style="width:100%; text-align: right;display: block;margin: 0.5rem;">
                    <div style="flex:1;display: none;"></div>
                    <div class="breadcrumbs" style="flex:1 ;padding: 0.5rem; width: fit-content;display: inline;border-radius: 0.2rem;">
                        <a href="minihub/" style="color: rgb(var(--normal-text-color));">Home</a> / <span style="color: #666;">Impression 3D</span> / <a href="minihub/Articles Guillivigne/Impression 3D/Réparer les éclairages d'un vélo de recyclerie avec l'impression 3D.html" >Réparer les éclairages d'un vélo de recyclerie avec l'impression 3D</a>
                    </div>
                </div>
<div class="content"><div class="title">Réparer les éclairages d'un vélo de recyclerie avec l'impression 3D !</div>
<hr />
<h1 id="introduction">Introduction</h1>
<div class="toc">
<ul>
<li><a href="#introduction" class="anchor-link">Introduction</a></li>
<li><a href="#conception" class="anchor-link">Conception</a><ul>
<li><a href="#support-de-la-carte-electronique" class="anchor-link">Support de la carte électronique</a></li>
<li><a href="#support-de-pile-cr2032" class="anchor-link">Support de pile CR2032</a></li>
<li><a href="#le-boitier" class="anchor-link">Le boîtier</a></li>
<li><a href="#le-couvercle" class="anchor-link">Le couvercle</a></li>
</ul>
</li>
<li><a href="#assemblage" class="anchor-link">Assemblage</a></li>
<li><a href="#rendu-final" class="anchor-link">Rendu final</a></li>
</ul>
</div>
<p>L’impression 3D a de nombreuses applications, on peut imprimer toutes sortes d’objets à but ludique, décoratif, mais aussi se servir de cet outil pour les <strong>réparer</strong> soi-même. En effet, avec un peu de patience et d’apprentissage, on peut concevoir ses propres pièces pour remplacer ou même améliorer les anciennes. Cela permet non seulement de faire des économies mais également d’éviter de jeter ce qui pourrait être réparé. On utilisera <a href="https://www.freecadweb.org/?lang=fr" class="external-link"><strong>Freecad</strong></a>, un logiciel CAO(<em>Conception Assistée par Ordinateur</em>) libre et gratuit qui permet de concevoir et modéliser en 3D les objets à imprimer !   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/FreeCAD02_screen.png" />   </p>
<div class="caption">Interface personnalisée de FreeCAD 0.2</div>

<p><br>   </p>
<p>Aujourd’hui on s’attaque à la réparation des éclairages d'un vélo Micmo Londonie récupéré dans une recyclerie.  <br />
<strong><code>L’objectif</code></strong> : Remplacer la dynamo, qui ne fonctionne plus, par un éclairage à LEDS de récupération tout en l’adaptant aux boîtiers des feux déjà existants pour garder le charme de ce vieux vélo !     </p>
<p><br>   </p>
<h1 id="conception">Conception</h1>
<p><strong>C'est parti pour le feu avant !</strong> Il se compose en deux parties, la première <em><strong>A</strong></em> sert à accueillir l'ampoule, à positionner le phare sur le cadre du vélo et vient se verrouiller avec une rotation et une vis dans la partie <em><strong>B</strong></em>, qui diffuse et amplifie la lumière émise. <br />
Comme l'ampoule est remplacée par une LED blanche, il faut créer un boîtier pouvant contenir sa carte électronique, 2 piles CR2032 et un peu de place pour un bouton poussoir. Et lui ajouter le mécanisme d'insertion et de verrouillage ainsi que le trou qui permet de faire passer la vis pour fixer le tout au cadre <em>(voir en dessous, à droite)</em>.   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_eclairage_avant.jpg" />   </p>
<p><br/>   </p>
<p>Nous commencerons par modéliser les éléments intérieurs, ce qui nous donnera une idée des dimensions nécessaires pour le boîtier. <br />
<br/>   </p>
<h2 id="support-de-la-carte-electronique">Support de la carte électronique</h2>
<p>La LED blanche est soudée sur une petite carte électronique faisant environ 20 mm x 20 mm. Pour bien la maintenir ainsi que la positionner, nous allons créer un petit support. La première étape est de relever les cotes grâce à un pied à coulisse <em>(très utile pour être le plus précis possible !)</em>. Ensuite, il suffit de reproduire la carte sur <strong>FreeCad</strong> et nous pouvons maintenant facilement créer le support. <br />
<br/>   </p>
<p>Voici le résultat, avec cette forme il suffit seulement de l'insérer !   </p>
<p><strong>Modèle 3D :</strong>   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fSupportPCB.stl" title="SupportPCB.stl" width="620" height="420" frameborder="0"></iframe>
<p><br />   </p>
<div class="callout callout-info active" rasa="1">
<div class="callout-title">
<div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="callout-icon"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
</div>
<div class="callout-title-name">Info
</div>
</div>
<div class="callout-content">
<p>N'hésitez pas à interagir avec le modèle 3D ! <br />
<strong>Clic gauche :</strong> Rotation <br />
<strong>Clic droit :</strong> Déplacement <br />
<strong>Molette</strong> : Zoom <br />
</p>
</div>
</div>
<p><br/>   </p>
<h2 id="support-de-pile-cr2032">Support de pile CR2032</h2>
<p><img src="minihub/Articles%20Guillivigne/Impression%203D/media/CR2032.png"  width="270"> <br />
Cette partie est un peu plus compliquée, tout d'abord il faut prendre en compte la taille de la pile <em>(20 mm de rayon et 3,2 mm d'épaisseur)</em>. <br />
Nous avons besoin d'accueillir 2 piles en série, superposées l'une sur l'autre, il faut qu'elles soient correctement maintenues tout en permettant d'être retirées facilement. <br />
Nous devons aussi prévoir 2 emplacements pour insérer les petits bras métalliques qui feront contact avec le (-) et le (+) pour faire passer le courant.  <br />
<br/>   </p>
<p>Après quelques essais, voilà le résultat :   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/schema_support_pile.png" />   </p>
<p><strong>Modèle 3D :</strong>   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fBatteryHolder.stl" title="BatteryHolder.stl" width="620" height="420" frameborder="0"></iframe>

<h2 id="le-boitier">Le boîtier</h2>
<p>Maintenant que nous savons ce que l'on va mettre dedans, nous allons dessiner sa forme. Il faut bien entendu prendre en compte certaines contraintes mais nous pouvons laisser place à un peu de créativité.    </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/boitier_angles.png" />   </p>
<p>Nous avons :   </p>
<ul>
<li>Reproduit le mécanisme d'insertion de la partie <em><strong>A</strong></em>. <mark class="formatting_highlight">[1]</mark>   </li>
<li>Percé un premier trou pour la vis qui permet de maintenir ensemble la partie <em><strong>A</strong></em> et <em><strong>B</strong></em>. <mark class="formatting_highlight">[2]</mark>   </li>
<li>Percé un deuxième trou pour la vis de maintien au cadre du vélo. <mark class="formatting_highlight">[3]</mark>   </li>
<li>Laissé un emplacement octogonal pour accueillir le support à pile ainsi que la LED. <mark class="formatting_highlight">[4]</mark>   </li>
<li>Créé une petite épaisseur pour accueillir le couvercle. <mark class="formatting_highlight">[5]</mark>   </li>
<li>Renforcé les endroits fragiles pour éviter des cassures. <mark class="formatting_highlight">[6]</mark>   </li>
</ul>
<p><strong>Modèle 3D :</strong>   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fCase.stl" title="Case.stl" width="620" height="420" frameborder="0"></iframe>

<h2 id="le-couvercle">Le couvercle</h2>
<p>Et nous voilà arrivés à la conception de la dernière pièce ! L'idée est de créer un couvercle en 2 parties. La première va se visser directement sur le boîtier, elle protégera de la pluie les pièces à l'intérieur. Pour faciliter le remplacement des piles <em>(et éviter de devoir dévisser à chaque fois, ce qui abîmerait le plastique sur le long terme)</em>, nous allons créer un trou au milieu qui viendra accueillir la deuxième pièce, un autre couvercle, rond qu'il faudra faire tourner avec une pièce ou même une pile pour ouvrir/fermer l'accès.    </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/schema_couvercle.png" />   </p>
<p><strong>Modèles 3D :</strong>   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fCase_Lid_Hole.stl" title="Case_Lid_Hole.stl" width="620" height="420" frameborder="0"></iframe>
<p><br />   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fBatteryLid.stl" title="BatteryLid.stl" width="620" height="420" frameborder="0"></iframe>

<p>Et voila le rendu 3D final, il ne nous reste plus qu'à imprimer chacune des pièces à l'aide des imprimantes 3D du Minihub, faire le montage et un peu d'électronique ! Mais nous verrons ça dans le chapitre suivant.   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/FinalBoitier.png" />   </p>
<p><strong>Modèle 3D :</strong>   </p>
<iframe src="https://viewscreen.githubusercontent.com/view/solid?url=https%3a%2f%2fraw.githubusercontent.com%2fskurdh%2fskurdh.github.io%2fmain%2fminihub%2fattachements%2fSTL%2fWhiteLightAll.stl" title="WhiteLightAll.stl" width="620" height="420" frameborder="0"></iframe>

<h1 id="assemblage">Assemblage</h1>
<p>Maintenant que nous avons imprimé toutes les pièces, il ne reste plus qu'à les assembler !    </p>
<div class="callout callout-info active" rasa="1">
<div class="callout-title">
<div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="callout-icon"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
</div>
<div class="callout-title-name">Info
</div>
</div>
<div class="callout-content">
<p>Toutes les pièces ont été imprimé en plastique PLA noir et orange.  <br />
</p>
</div>
</div>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_supports_imprim%C3%A9s.jpg" />   </p>
<p>Le support de la LED et des piles ont été collés ensemble, et il a fallu faire quelques soudures pour relier les bornes des piles ainsi que le bouton poussoir à la carte électronique.   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_boitier_imprimes.jpg" />   </p>
<p>Les supports ont été insérés dans le boitier, tout rentre et est parfaitement maintenu.   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_boitier_couvercles.jpg" />   </p>
<p>Il ne reste plus qu'à fermer le tout ! <strong>Et c'est terminé !</strong>   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_feu_avant.jpg" />   </p>
<p>Nous pouvons maintenant passer à l'éclairage arrière. Cette fois ci, il y a beaucoup moins de place comme il faut tout faire rentrer dans le boîtier à cause de son emplacement sur le vélo. Voilà le résultat :   </p>
<p><img alt="" src="minihub/Articles%20Guillivigne/Impression%203D/media/BP_feu_arriere.jpg" />   </p>
<h1 id="rendu-final">Rendu final</h1>
<ul>
<li>Parler vite fait du vélo.   </li>
<li>Parler de la 3D (Ce qui peut parfois être compliqué avec la 3D c'est de ne pas avoir de retour. Or, avec l'impression 3D on a la possibilité de rendre réel ce que nous avons modélisé virtuellement ! et ça change tout.)   </li>
<li>Lier ça à Guillivigne</li>
</ul></div>
<div class="note-footer">
<div class="backlinks">
<h2>Backlinks</h2>
<ul>
	<li><a class="backlink" href="/minihub/index.html">index</a></li>
</ul>
</div>

<div class="tags">

</div>

</div>
<div class="graph requires_js ">
    <div id="A240675153535979654660082062771783755980{level}" class="graph_div"></div>
    
    <div class="graph-button-row" style="display:flex;">
        <button class="graph_button graph_show_button" id="B240675153535979654660082062771783755980{level}" level="{level}" note_temp_id="240675153535979654660082062771783755980" onclick="window.ObsHtmlGraph.run(this, '240675153535979654660082062771783755980', 'réparer les éclairages d'un vélo de recyclerie avec l'impression 3d');">
            Afficher le Graph
        </button>
        <button class="graph_button graph_type_button" id="C240675153535979654660082062771783755980{level}" style="flex:1" onclick="window.ObsHtmlGraph.switch_graph_type(this);">
            2D
        </button>
    </div>
</div>

<script type="module">
    if (window.ObsHtmlGraph == undefined){
        import('minihub/obs.html/static/graph.js').then((Module) => {
            window.ObsHtmlGraph = Module;
            window.ObsHtmlGraph.arm_page(document.getElementById('page_holder'))
        })
    }
</script>




                                <!-- end content -->
                        </div>
                        <div class="container_filler">
                        </div>
                        <div id="right_pane" class="right_pane active">
    <div id="right_pane_fold_header" class="right_pane_fold_header fold_header">x</div>
    <div id="right_pane_content" class="right_pane_content">
            
    </div>
</div>
                </div>
        </div>

        <script>
                function handle_toggle_side_bar(e){
                        let header;
                        let pane; 
                        let target = e.target

                        // switch out the navbar button click for a header click
                        if (target.id == 'left_pane_toggle_nav'){
                                target = document.getElementById('left_pane_fold_header')
                        }
                        else if (target.id == 'right_pane_toggle_nav'){
                                target = document.getElementById('right_pane_fold_header')
                        }

                        // get header and pane
                        if (target.classList.contains('fold_header')) {
                                header = target;
                                pane = target.parentElement;
                        }
                        else {
                                pane = target;
                                header = target.getElementsByClassName('fold_header')[0];
                        }
                        toggle_side_bar(pane, header, true)
                        e.stopPropagation();
                }
                function handle_toggle_side_bar_button(e){
                        document.getElementById('menu_toggle_button').click()
                        handle_toggle_side_bar(e);
                }

                function toggle_side_bar(pane, header, save) {
                        let active = (pane.classList.contains('active'))
                        if (active){
                                disable_side_bar(pane, header, save);
                        }
                        else {
                                enable_side_bar(pane, header, save);
                        }
                }
                function enable_side_bar(pane, header, save){
                        pane.classList.add('active');
                        pane.removeEventListener('click', handle_toggle_side_bar);
                        header.addEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, true) }
                }
                function disable_side_bar(pane, header, save){
                        pane.classList.remove('active');
                        pane.addEventListener('click', handle_toggle_side_bar);
                        header.removeEventListener('click', handle_toggle_side_bar);
                        set_correct_header_symbol(header);
                        if (save){ save_panel_folding_state(header, false) }
                }
                function set_correct_header_symbol(header){
                        let pane = header.parentElement;
                        let symbol = [['>', '<'],['<', '>']]
                        symbol = symbol[Number(header.classList.contains('right_pane_fold_header'))][Number(pane.classList.contains('active'))];
                        console.log(symbol);
                        header.innerHTML = symbol
                        return header;
                }
                function panel_folding_get_panel_name(header){
                        return ['left', 'right'][Number(header.classList.contains('right_pane_fold_header'))]
                }
                function save_panel_folding_state(header, active){
                        ls_set('pane_folding_state_'+panel_folding_get_panel_name(header), Number(active));
                }
                function load_panel_folding_state(panel_name){
                        val = ls_get('pane_folding_state_'+panel_name)
                        if (!val){ return {'exists': false, 'value': null}}
                        return {'exists': true, 'value': Boolean(Number(val))}
                }
                function set_pane_folding_start(left_header, right_header){
                        // small screen = closed
                        let right_pane_enabled = true;
                        let left_pane_enabled = true;
                        let w = window.visualViewport.width
                        if (w < 1000){
                                left_pane_enabled = false
                        }
                        if (w < 800){
                                right_pane_enabled = false
                        }

                        // get saved values if present
                        let rval = load_panel_folding_state('right')
                        if (rval['exists']){
                                right_pane_enabled = rval['value']
                        }
                        let lval = load_panel_folding_state('left')
                        if (lval['exists']){
                                left_pane_enabled = lval['value']
                        }

                        // default = enabled, so we only need to disable
                        if (!left_pane_enabled){
                                disable_side_bar(document.getElementById('left_pane'), document.getElementById('left_pane_fold_header'))
                        }
                        if (!right_pane_enabled){
                                disable_side_bar(document.getElementById('right_pane'), document.getElementById('right_pane_fold_header'))
                        }
                }

                function init_pane_folding(header){
                        set_correct_header_symbol(header);
                        header.addEventListener('click', handle_toggle_side_bar);
                }
                
                
                set_pane_folding_start()
                init_pane_folding(document.getElementById('left_pane_fold_header'));
                init_pane_folding(document.getElementById('right_pane_fold_header'));

                document.getElementById('left_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
                document.getElementById('right_pane_toggle_nav').addEventListener('click', handle_toggle_side_bar_button);
        </script>

        <script src="minihub/obs.html/static/load_dirtree_footer.js" type="text/javascript"></script>

        




</body>
</html>
